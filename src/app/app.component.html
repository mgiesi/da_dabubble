<app-overlay-landscape></app-overlay-landscape>

<!-- @if (shouldShowAnimation$ | async) {
<div class="animation-overlay">
  <div class="overlay-box">
    <div class="animation-overlay-content">
      <div class="logo">
        <img (load)="onLogoLoad()" src="img/logo/DABubble-logo-animation.png" alt="DABubble Logo">
      </div>
      <div class="text">
        <h1>DABubble</h1>
      </div>
    </div>
  </div>
</div>
} -->

<div class="app-container" #appContainer [ngClass]="{'animation-active': shouldShowAnimation$ | async}"
  (scroll)="onAppContainerScroll()">
  <div [ngClass]="{
      'logo-text-box-desktop': !(isAuthenticated$ | async),
      'visible': showLogoBox && !(isAuthenticated$ | async)
    }" *ngIf="!(isAuthenticated$ | async) || ((isAuthenticated$ | async) && !(showHeader$ | async))">
    <img (load)="onLogoLoad()" src="img/logo/DABubble-logo-animation.png" alt="DABubble Logo">
    <h1>DABubble</h1>
  </div>

  <div class="header" *ngIf="(isAuthenticated$ | async) && (showHeader$ | async)">
    <div class="header-logo">
      @if (showBackArrow()) {
      <button class="back-arrow" (click)="onBackClick()" aria-label="ZurÃ¼ck zum Workspace">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"
            stroke-linejoin="round" />
        </svg>
      </button>
      }
      <img [src]="logoSrc()" alt="Logo">

      <h1>{{ headerTitle() }}</h1>
    </div>

    <div class="search-input-box">
      <label *ngIf="showSearchLabel$ | async" class="label-input-field-white-img-right" for="searchInput">
        <input #searchInput id="searchInput" type="text" placeholder="Devspace durchsuchen" autocomplete="off"
          (input)="onSearchInput($event)" />
        <img src="icons/search.svg" alt="Suchen Icon" />
      </label>
      <div *ngIf="(filteredResults$ | async) as users" class="autocomplete-dropdown">
        <ng-container *ngIf="users.length > 0">
          <ul class="user-search-list">
            <li *ngFor="let item of users" class="autocomplete-option" (mouseover)="onSearchResultHover(item)"
              (mouseleave)="onSearchResultHoverEnd()">
              <app-profile-badge *ngIf="item.displayName" class="" [user]="item" (click)="onDirectMessageClick(item)" [openProfileDetailsOnClick]="false"/>
              <app-channel-badge *ngIf="!item.displayName && item.name" [channel]="item" (click)="onChannelClick(item)"/>
            </li>
          </ul>
        </ng-container>
      </div>
    </div>


    <div class="header-right" *ngIf="isAuthenticated$ | async">
      <app-profile-menu></app-profile-menu>
    </div>
  </div>

  <button class="btn-scroll-top" @fadeInOut *ngIf="(showScrollToTopBtn$ | async) && showScrollTopBtn"
    (click)="scrollToTop()">
    <svg viewBox="0 0 25 25" fill="" xmlns="http://www.w3.org/2000/svg">
      <path
        d="M11.7412 19.8001L5.14121 13.2001C5.04121 13.1001 4.97021 12.9917 4.92821 12.8751C4.88688 12.7584 4.86621 12.6334 4.86621 12.5001C4.86621 12.3667 4.88688 12.2417 4.92821 12.1251C4.97021 12.0084 5.04121 11.9001 5.14121 11.8001L11.7412 5.20008C11.9245 5.01675 12.1535 4.92075 12.4282 4.91208C12.7035 4.90408 12.9412 5.00008 13.1412 5.20008C13.3412 5.38342 13.4455 5.61242 13.4542 5.88708C13.4622 6.16242 13.3662 6.40008 13.1662 6.60008L8.26621 11.5001H19.4412C19.7245 11.5001 19.9622 11.5957 20.1542 11.7871C20.3455 11.9791 20.4412 12.2167 20.4412 12.5001C20.4412 12.7834 20.3455 13.0207 20.1542 13.2121C19.9622 13.4041 19.7245 13.5001 19.4412 13.5001H8.26621L13.1662 18.4001C13.3495 18.5834 13.4455 18.8167 13.4542 19.1001C13.4622 19.3834 13.3662 19.6167 13.1662 19.8001C12.9829 20.0001 12.7495 20.1001 12.4662 20.1001C12.1829 20.1001 11.9412 20.0001 11.7412 19.8001Z"
        fill="" />
    </svg>
  </button>
  <main class="app-content">
    <div class="logo-text-box-mobile" *ngIf="!(isAuthenticated$ | async)" [ngClass]="{
      'logo-text-box-mobile': true,
      'visible': showLogoBox
    }">
      <img src="img/logo/DABubble-logo-animation.png" alt="DABubble Logo">
      <h1>DABubble</h1>
    </div>
    <router-outlet></router-outlet>
  </main>
</div>